<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>后台登录</title>
	<meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <link rel="shortcut icon" href="/ssm_demo/html/images/508835.gif" type="image/x-icon" />
    <link rel="stylesheet" href="/ssm_demo/html/css/font.css">
	<link rel="stylesheet" href="/ssm_demo/html/css/xadmin.css">
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script src="/ssm_demo/html/lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="/ssm_demo/html/js/xadmin.js"></script>

</head>
<body class="login-bg">
    
    <div class="login layui-anim layui-anim-up">
        <div class="message">标记云管理登录</div>
        <div id="darkbannerwrap"></div>
        
        <form method="post" action="/ssm_demo/user/login" class="layui-form" >
        <!--<form method="post" class="layui-form" >-->
            <input name="username" placeholder="用户名"  type="text" lay-verify="required" class="layui-input" >
            <hr class="hr15">
            <input name="passwd" lay-verify="required" placeholder="密码"  type="password" class="layui-input">
            <hr class="hr15">
            <input value="登录" lay-submit lay-filter="login" style="width:100%;" type="submit" hr>
            <hr class="hr20" >
        </form>
    </div>
    <script>
        layui.use('form', function () {
            var form = layui.form,
                $=layui.jquery;

            // 监听提交
            form.on('submit(login)', function (data) {
                /*  方式一  参数在url后面不安全，返回值不好处理*/
/*                layer.msg(JSON.stringify(data.field), function () {
                    location.href='/ssm_demo/user/login?username='+ data.field.username + '&passwd='+data.field.passwd
                });
                return false;*/
                    /*  方式二 ajax请求无法跳转页面 */
/*                    var jsonstr = JSON.stringify(data.field);
                    console.log(jsonstr);
                    $.ajax({
                        url: '/ssm_demo/user/login',
                        // url: './user/login',
                        // async: false, // 默认true，异步；false代表同步，如果同步就失去了ajax的意义
                        method: 'post',
                        // data:data.field,
                        data: {
                            'jsonstr': jsonstr
                        },
                        dataType: 'JSON',
                        success: function (res) {
                            console.log(res);
                            layer.msg(res);
                            console.log(res.code);
                            layer.msg(res.code);
                            if(res.code==200) {
                                console.log(res.data)
                            }
                            if (res === "success") {
                                // parent.closeIframe(res.msg);
                                location.href='/ssm_demo/home';
                            } else {
                                alert(res);
                            }
                        },
                        error: function (data) {

                        }
                    });*/
            });
        });
    </script>
</body>
</html>